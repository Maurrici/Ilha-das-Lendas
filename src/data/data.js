const teams = [
    {
        id: 1,
        name: "Fluxo",
        shortName: "FX",
        img: "/team/fluxo.png",
        players: [
            {
                id: 1,
                name: "Rodrigo Panisa",
                nick: "Tay",
                role: "top",
                overallHistory: [65, 63, 70, 73],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 2,
                name: "Pedro Cavalvante",
                nick: "Disamis",
                role: "jg",
                overallHistory: [75, 73, 75, 76],
                country: "br",
                mvp: 0,
                bagre: 0
            },
            {
                id: 3,
                name: "Bruno Ferreira",
                nick: "Hauz",
                role: "mid",
                overallHistory: [89, 79, 78, 81],
                country: "br",
                mvp: 1,
                bagre: 1
            },
            {
                id: 4,
                name: "Diego Amaral",
                nick: "Brance",
                role: "adc",
                overallHistory: [88, 84, 82, 82],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 5,
                name: "Gabriel Dzelme",
                nick: "Jojo",
                role: "sup",
                overallHistory: [90, 88, 85, 81],
                country: "br",
                mvp: 0,
                bagre: 1
            },
        ]
    },
    {
        id: 2,
        name: "Furia",
        shortName: "FUR",
        img: "/team/furia.png",
        players: [
            {
                id: 6,
                name: "Natan Braz",
                nick: "Fnb",
                role: "top",
                overallHistory: [93, 79, 82, 69],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 7,
                name: "Gabriel da Luz",
                nick: "Goot",
                role: "jg",
                overallHistory: [72, 68, 71, 66],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 8,
                name: "Bruno Farias",
                nick: "Envy",
                role: "mid",
                overallHistory: [85, 80, 85, 80],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 9,
                name: "Matheus Nóbrega",
                nick: "Trigo",
                role: "adc",
                overallHistory: [85, 83, 87, 81],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 10,
                name: "Ygor Freitas",
                nick: "Redbert",
                role: "sup",
                overallHistory: [87, 79, 84, 79],
                country: "br",
                mvp: 0,
                bagre: 0
            },
        ]
    },
    {
        id: 3,
        name: "INTZ",
        shortName: "ITZ",
        img: "/team/intz.png",
        players: [
            {
                id: 11,
                name: "Kwen Hee Won",
                nick: "Zzk",
                role: "top",
                overallHistory: [60, 66, 72, 81],
                country: "kr",
                mvp: 1,
                bagre: 1
            },
            {
                id: 12,
                name: "Yan Petermann",
                nick: "Yampi",
                role: "jg",
                overallHistory: [70, 70, 70, 78],
                country: "br",
                mvp: 0,
                bagre: 0
            },
            {
                id: 13,
                name: "Júlio Cezar Cruz",
                nick: "Nosferus",
                role: "mid",
                overallHistory: [62, 71, 74, 83],
                country: "br",
                mvp: 2,
                bagre: 0
            },
            {
                id: 14,
                name: "Yudi Miyashiro",
                nick: "Ninjakiwi",
                role: "adc",
                overallHistory: [59, 59, 69, 70],
                country: "br",
                mvp: 0,
                bagre: 1
            },
            {
                id: 15,
                name: "Woo Jun Sung",
                nick: "Nia",
                role: "sup",
                overallHistory: [50, 64, 69, 74],
                country: "kr",
                mvp: 0,
                bagre: 0
            },
        ]
    },
    {
        id: 4,
        name: "Kabum",
        shortName: "KBM",
        img: "/team/kabum.png",
        players: [
            {
                id: 16,
                name: "Gyujun Han",
                nick: "Lonely",
                role: "top",
                overallHistory: [73, 83, 90, 94],
                country: "kr",
                mvp: 2,
                bagre: 0
            },
            {
                id: 17,
                name: "Artur Scalabrin",
                nick: "Scary",
                role: "jg",
                overallHistory: [61, 65, 73, 82],
                country: "br",
                mvp: 0,
                bagre: 1
            },
            {
                id: 18,
                name: "Cha Hee-min",
                nick: "Yuri",
                role: "mid",
                overallHistory: [82, 82, 80, 86],
                country: "kr",
                mvp: 0,
                bagre: 1
            },
            {
                id: 19,
                name: "Igor Lima",
                nick: "Dudstheboy",
                role: "adc",
                overallHistory: [74, 68, 70, 83],
                country: "br",
                mvp: 2,
                bagre: 1
            },
            {
                id: 20,
                name: "Gabriel Scuro",
                nick: "Scuro",
                role: "sup",
                overallHistory: [69, 70, 72, 81],
                country: "br",
                mvp: 0,
                bagre: 0
            },
        ]
    },
    {
        id: 5,
        name: "Keyd",
        shortName: "VKS",
        img: "/team/keyd.png",
        players: [
            {
                id: 21,
                name: "Guilherme Ruiz",
                nick: "Guigo",
                role: "top",
                overallHistory: [75, 75, 73, 70],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 22,
                name: "Hugo Dias",
                nick: "Hugato",
                role: "jg",
                overallHistory: [70, 75, 72, 67],
                country: "br",
                mvp: 1,
                bagre: 1
            },
            {
                id: 23,
                name: "Daniel Ferreira",
                nick: "Grevthar",
                role: "mid",
                overallHistory: [74, 77, 75, 71],
                country: "br",
                mvp: 0,
                bagre: 0
            },
            {
                id: 24,
                name: "Micael Rodrigues",
                nick: "Micao",
                role: "adc",
                overallHistory: [79, 76, 74, 67],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 25,
                name: "Gabriel Donner",
                nick: "Bounty",
                role: "sup",
                overallHistory: [66, 66, 66, 64],
                country: "br",
                mvp: 0,
                bagre: 0
            },
        ]
    },
    {
        id: 6,
        name: "Liberty",
        shortName: "LBR",
        img: "/team/liberty.png",
        players: [
            {
                id: 26,
                name: "Thiago Campos",
                nick: "Kiari",
                role: "top",
                overallHistory: [69, 69, 69, 71],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 27,
                name: "Lucas Miranda",
                nick: "Accez",
                role: "jg",
                overallHistory: [63, 72, 72, 78],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 28,
                name: "Elvis Vergara",
                nick: "Piloto",
                role: "mid",
                overallHistory: [60, 68, 66, 66],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 29,
                name: "Julio Henrique",
                nick: "Juliera",
                role: "adc",
                overallHistory: [70, 75, 71, 75],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 30,
                name: "Alexandre Fernandes",
                nick: "Cavalo",
                role: "sup",
                overallHistory: [72, 72, 67, 70],
                country: "br",
                mvp: 0,
                bagre: 1
            },
        ]
    },
    {
        id: 7,
        name: "Los Grandes",
        shortName: "LOS",
        img: "/team/los grandes.png",
        players: [
            {
                id: 31,
                name: "Taemin Shin",
                nick: "Hirit",
                role: "top",
                overallHistory: [95, 95, 93, 91],
                country: "kr",
                mvp: 0,
                bagre: 0
            },
            {
                id: 32,
                name: "Felipe Brombilla",
                nick: "Ranger",
                role: "jg",
                overallHistory: [83, 78, 88, 90],
                country: "br",
                mvp: 2,
                bagre: 1
            },
            {
                id: 33,
                name: "Taehun Kim",
                nick: "Lava",
                role: "mid",
                overallHistory: [96, 91, 92, 90],
                country: "kr",
                mvp: 1,
                bagre: 0
            },
            {
                id: 34,
                name: "Lucas Flores",
                nick: "Netuno",
                role: "adc",
                overallHistory: [82, 65, 80, 89],
                country: "br",
                mvp: 2,
                bagre: 1
            },
            {
                id: 35,
                name: "Vinicius Viana",
                nick: "Zay",
                role: "sup",
                overallHistory: [70, 59, 71, 82],
                country: "br",
                mvp: 0,
                bagre: 1
            },
        ]
    },
    {
        id: 8,
        name: "Loud",
        shortName: "LLL",
        img: "/team/loud.png",
        players: [
            {
                id: 36,
                name: "Leonardo Souza",
                nick: "Robo",
                role: "top",
                overallHistory: [95, 93, 85, 83],
                country: "br",
                mvp: 0,
                bagre: 2
            },
            {
                id: 37,
                name: "Park Jong-hoon",
                nick: "Croc",
                role: "jg",
                overallHistory: [92, 92, 86, 82],
                country: "kr",
                mvp: 1,
                bagre: 1
            },
            {
                id: 38,
                name: "Thiago Sartori",
                nick: "Tinowns",
                role: "mid",
                overallHistory: [95, 95, 91, 89],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 39,
                name: "Geomsoo Mun",
                nick: "Route",
                role: "adc",
                overallHistory: [91, 94, 89, 88],
                country: "kr",
                mvp: 1,
                bagre: 0
            },
            {
                id: 40,
                name: "Denilson Oliveira",
                nick: "Ceos",
                role: "sup",
                overallHistory: [93, 94, 90, 90],
                country: "br",
                mvp: 0,
                bagre: 0
            },
        ]
    },
    {
        id: 9,
        name: "Pain",
        shortName: "PNG",
        img: "/team/pain.png",
        players: [
            {
                id: 41,
                name: "Euiseok Choi",
                nick: "Wizer",
                role: "top",
                overallHistory: [90, 88, 76, 70],
                country: "kr",
                mvp: 1,
                bagre: 0
            },
            {
                id: 42,
                name: "Marcos Oliveira",
                nick: "Cariok",
                role: "jg",
                overallHistory: [87, 79, 66, 64],
                country: "br",
                mvp: 0,
                bagre: 4
            },
            {
                id: 43,
                name: "Matheus Miranda",
                nick: "Dynquedo",
                role: "mid",
                overallHistory: [84, 79, 77, 80],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 44,
                name: "Youngnnon Joo",
                nick: "Bvoy",
                role: "adc",
                overallHistory: [92, 91, 83, 82],
                country: "kr",
                mvp: 0,
                bagre: 0
            },
            {
                id: 45,
                name: "Yan Neves",
                nick: "Damage",
                role: "sup",
                overallHistory: [81, 79, 68, 67],
                country: "br",
                mvp: 0,
                bagre: 0
            },
        ]
    },
    {
        id: 10,
        name: "Red",
        shortName: "RED",
        img: "/team/red.png",
        players: [
            {
                id: 46,
                name: "Felipe Boal",
                nick: "Boal",
                role: "top",
                overallHistory: [67, 73, 81, 85],
                country: "br",
                mvp: 1,
                bagre: 0
            },
            {
                id: 47,
                name: "Gabriel Lemos",
                nick: "Aegis",
                role: "jg",
                overallHistory: [90, 91, 91, 91],
                country: "br",
                mvp: 0,
                bagre: 0
            },
            {
                id: 48,
                name: "Adriano Perassoli",
                nick: "Avenger",
                role: "mid",
                overallHistory: [65, 80, 83, 84],
                country: "br",
                mvp: 1,
                bagre: 1
            },
            {
                id: 49,
                name: "Alexandre Santos",
                nick: "Titan",
                role: "adc",
                overallHistory: [93, 94, 95, 93],
                country: "br",
                mvp: 3,
                bagre: 0
            },
            {
                id: 50,
                name: "Wonyoung Choi",
                nick: "Kuri",
                role: "sup",
                overallHistory: [82, 88, 91, 91],
                country: "kr",
                mvp: 0,
                bagre: 0
            },
        ]
    },
]

class DB {
    static getTeams(){
        return teams.map(team => {
            return {
                id: team.id,
                name: team.name,
                shortName: team.shortName,
                img: team.img,
                value: team.name
            }
        });
    }
    
    static getTeam(id){
        let team = teams.find(team => team.id === id);

        team.players = team.players.map(player => {
            let overallCurrent = player.overallHistory.length - 1;
            player.overall = player.overallHistory[overallCurrent];
            player.team = team.name;
            player.img = `/role/${player.role}.svg`;

            return player;
        });

        team.overall = team.players.reduce((total, player) => total + player.overall, 0)/team.players.length;

        return team;
    }

    static getTeamRanking(){

        // Processamento de Dados
        let teamList = teams.map(team => {
            let overall = team.players.reduce((total, player) => {
                let current = player.overallHistory.length - 1;

                return total + player.overallHistory[current];
            }, 0);

            overall = overall/team.players.length;

            return{
                id: team.id,
                name: team.name,
                img: team.img,
                overall: overall
            }
        });

        // Ordenação
        teamList = teamList.sort((a, b) => b.overall - a.overall);

        return teamList;
    }

    static getTopTeam(){
        let teams = this.getTeamRanking();

        return teams[0];
    }

    static getWorstTeam(){
        let teams = this.getTeamRanking();

        return teams[teams.length - 1];
    }

    static getPlayerRanking(){
        let playerList = teams.reduce((total, team) => {
            team.players.forEach(player => {
                let currentOverall = player.overallHistory.length - 1;
                player.overall = player.overallHistory[currentOverall];
                player.team = team.name;

                total.push(player);
            });

            return total;
        }, []);
        
        playerList = playerList.sort((a, b) => b.overall - a.overall);

        return playerList;
    }

    static getPlayer(id){
        let player;

        for(const team of teams) {
            player = team.players.find(p => p.id === id);
            if(player != undefined){
                player.team = team.name;
                break;
            }
        }

        // Set Current Overall
        let currentIndex = player.overallHistory.length - 1;
        player.overall = player.overallHistory[currentIndex];

        // Set img
        if(player.overall >= 50 && player.overall < 60) player.img = `/player/50/${player.nick.toLowerCase()}.png`;
        else if(player.overall >= 60 && player.overall < 70) player.img = `/player/60/${player.nick.toLowerCase()}.png`;
        else if(player.overall >= 70 && player.overall < 80) player.img = `/player/70/${player.nick.toLowerCase()}.png`;
        else if(player.overall >= 80 && player.overall < 90) player.img = `/player/80/${player.nick.toLowerCase()}.png`;
        else if(player.overall >= 90) player.img = `/player/90/${player.nick.toLowerCase()}.png`;

        return player;
    }

    static getTopPlayer(){
        let players = this.getPlayerRanking();

        return this.getPlayer(players[0].id);
    }

    static getWorstPlayer(){
        let players = this.getPlayerRanking();

        return this.getPlayer(players[players.length - 1].id);
    }

    static getTopMVP(){
        let players = this.getPlayerRanking();

        players = players.sort((a, b) => b.mvp - a.mvp);

        return this.getPlayer(players[0].id);
    }

    static getTopBagre(){
        let players = this.getPlayerRanking();

        players = players.sort((a, b) => b.bagre - a.bagre);

        return this.getPlayer(players[0].id);
    }

    static getRoles(){
        return [
            { name: "top", value: "top", img: "/role/top.png"},
            { name: "jg", value: "jg", img: "/role/jg.png"},
            { name: "mid", value: "mid", img: "/role/mid.png"},
            { name: "adc", value: "adc", img: "/role/adc.png"},
            { name: "sup", value: "sup", img: "/role/sup.png"}
        ]
    }

    static getCountries(){
        return [
            {name: "Brasil", value: "br", img: "/country/br.svg"},
            {name: "Coreia do Sul", value: "kr", img: "/country/kr.svg" }
        ]
    }
}


export default DB;